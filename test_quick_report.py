#!/usr/bin/env python3
"""
å¿«é€Ÿæµ‹è¯•æ”¹è¿›åçš„æŠ¥å‘Šç”ŸæˆåŠŸèƒ½
"""

from tools.report_generator import report_generator

def test_quick_report():
    """å¿«é€Ÿæµ‹è¯•æŠ¥å‘Šç”Ÿæˆ"""
    print("ğŸ§ª å¿«é€Ÿæµ‹è¯•æ”¹è¿›åçš„æŠ¥å‘Šç”ŸæˆåŠŸèƒ½")
    print("=" * 40)
    
    # æµ‹è¯•å†…å®¹
    test_content = """
    æè‡ªæˆï¼ˆ1606å¹´9æœˆ22æ—¥â€”1645å¹´5æœˆ17æ—¥ï¼‰ï¼ŒåŸåé¸¿åŸºï¼Œé™•è¥¿ç±³è„‚äººï¼Œä¸–å±…ç±³è„‚æç»§è¿å¯¨ï¼Œæ˜æœ«æ°‘å˜é¢†è¢–ä¹‹ä¸€ï¼Œå¤§é¡ºçš‡å¸ã€‚
    
    æè‡ªæˆå‡ºç”Ÿåœ¨ç±³è„‚æ²³è¥¿200é‡Œæ€€è¿œå ¡æç»§è¿å¯¨ï¼ˆä»Šæ¨ªå±±å¿åŸå…³è¡—é“æŸ´å…´æ¢æ‘ï¼‰ã€‚å´‡ç¥¯å¸é‡‡ä¿¡å¤§è‡£è£æ’¤é©¿å’çš„å»ºè®®ï¼Œé€ æˆå¤±ä¸šé©¿å’æ­¦å¤«èµ·ä¹‰ï¼Œæè‡ªæˆå‚ä¸èµ·ä¹‰å†›ã€‚
    
    é«˜è¿ç¥¥è¢«æ˜æœå¤„å†³åï¼Œæè‡ªæˆç§°é—¯ç‹ï¼Œæˆä¸ºæ˜æœ«æ°‘å˜é¢†è¢–ä¹‹ä¸€ï¼Œç‡èµ·ä¹‰å†›äºæ²³å—æ­¼ç­æ˜å†›ä¸»åŠ›ã€‚å´‡ç¥¯åä¸ƒå¹´ï¼ˆ1644å¹´ï¼‰æ­£æœˆï¼Œæè‡ªæˆåœ¨è¥¿å®‰ç§°ç‹ï¼Œå›½å·å¤§é¡ºï¼Œå¹´å·æ°¸æ˜Œã€‚
    
    åŒå¹´ä¸‰æœˆï¼Œæè‡ªæˆæ”»å…¥åŒ—äº¬ï¼Œå´‡ç¥¯å¸è‡ªç¼¢äºç…¤å±±ï¼Œæ˜æœç­äº¡ã€‚æè‡ªæˆåœ¨åŒ—äº¬ç§°å¸ï¼Œä½†ä¸ä¹…åæ¸…å†›å…¥å…³ï¼Œæè‡ªæˆè¢«è¿«æ’¤ç¦»åŒ—äº¬ã€‚
    
    1645å¹´ï¼Œæè‡ªæˆåœ¨æ¹–åŒ—ä¹å®«å±±è¢«å½“åœ°åœ°ä¸»æ­¦è£…æ€å®³ï¼Œä¸€è¯´åœ¨æ¹–å—å½’éšã€‚æè‡ªæˆé¢†å¯¼çš„å†œæ°‘èµ·ä¹‰è™½ç„¶æœ€ç»ˆå¤±è´¥ï¼Œä½†åŠ é€Ÿäº†æ˜æœçš„ç­äº¡ï¼Œå¯¹ä¸­å›½å†å²äº§ç”Ÿäº†é‡è¦å½±å“ã€‚
    """
    
    # ç”ŸæˆæŠ¥å‘Š
    result = report_generator(
        content=test_content,
        format="markdown",
        max_words=500,
        title="æè‡ªæˆç”Ÿå¹³ç®€æ",
        sections=["æ‘˜è¦", "ä¸»è¦å†…å®¹", "å…³é”®ä¿¡æ¯", "ç»“è®º"]
    )
    
    if result.get('status') == 'success':
        print("âœ… æŠ¥å‘Šç”ŸæˆæˆåŠŸ")
        
        output_data = result.get('data', {}).get('primary', {})
        report_content = output_data.get('report_content', '')
        
        print("\nğŸ“„ ç”Ÿæˆçš„æŠ¥å‘Š:")
        print("-" * 40)
        print(report_content)
        print("-" * 40)
        
        # æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
        analysis = output_data.get('analysis', {})
        print(f"\nğŸ“Š ç»Ÿè®¡ä¿¡æ¯:")
        print(f"   å†…å®¹é•¿åº¦: {analysis.get('content_length', 0)} å­—ç¬¦")
        print(f"   è¯æ•°: {analysis.get('word_count', 0)} è¯")
        print(f"   è¯­è¨€: {analysis.get('language', 'zh')}")
        print(f"   å†…å®¹ç±»å‹: {analysis.get('content_type', 'general')}")
        
        # æ˜¾ç¤ºå…³é”®ä¿¡æ¯
        entities = analysis.get('key_entities', [])
        topics = analysis.get('main_topics', [])
        
        print(f"\nğŸ” å…³é”®å®ä½“: {', '.join(entities[:5])}")
        print(f"ğŸ“‹ ä¸»è¦è¯é¢˜: {', '.join(topics[:3])}")
        
    else:
        print(f"âŒ æŠ¥å‘Šç”Ÿæˆå¤±è´¥: {result.get('message', 'æœªçŸ¥é”™è¯¯')}")

if __name__ == "__main__":
    test_quick_report() 